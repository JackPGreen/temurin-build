<?xml version='1.0' encoding='UTF-8'?>
<!--
  ~ ********************************************************************************
  ~ Copyright (c) 2024 Contributors to the Eclipse Foundation
  ~
  ~ See the NOTICE file(s) with this work for additional
  ~ information regarding copyright ownership.
  ~
  ~ This program and the accompanying materials are made
  ~ available under the terms of the Apache Software License 2.0
  ~ which is available at https://www.apache.org/licenses/LICENSE-2.0.
  ~
  ~ SPDX-License-Identifier: Apache-2.0
  ~ ********************************************************************************
-->

<playlist xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../TKG/playlist.xsd">
	<include>reproducible.mk</include>
	<test>
		<testCaseName>Rebuild_Same_JDK_Reproducibility_Test</testCaseName>
                <command>unset SPEC;\
                rm -rf "$(TEST_ROOT)$(D)RWS";\
                mkdir -p "$(TEST_ROOT)$(D)RWS";\
                $(TEST_ROOT)$(D)system$(D)reproducibleCompare$(D)linux_repro_build_compare.sh --sbom-url "$(SBOM_FILE)" --jdk-url "$(JDK_FILE)" --attestation-verify --user-devkit-location "$(LINUX_ADOPTIUM_DEVKIT)" --build-workspace "$(TEST_ROOT)$(D)RWS"; \
        $(TEST_STATUS)
		</command>
		<levels>
			<level>special</level>
		</levels>
		<groups>
			<group>system</group>
		</groups>
		<vendors>
			<vendor>eclipse</vendor>
		</vendors>
		<versions>
			<version>21+</version>
		</versions>
		<platformRequirements>os.linux</platformRequirements>
	</test>
	<test>
		<testCaseName>Rebuild_Same_JDK_Reproducibility_Test_win</testCaseName>
		<command>unset SPEC;\
		$(TEST_ROOT)$(D)system$(D)reproducibleCompare$(D)windows_repro_build_compare.sh --sbom-url $(SBOM_FILE) --jdk-url $(JDK_FILE) --report-dir $(REPORTDIR) --user-devkit-location $(WINDOWS_ADOPTIUM_DEVKIT) --attestation-verify; \
	$(TEST_STATUS)
		</command>
		<levels>
			<level>special</level>
		</levels>
		<groups>
			<group>system</group>
		</groups>
		<vendors>
			<vendor>eclipse</vendor>
		</vendors>
		<versions>
			<version>21+</version>
		</versions>
		<platformRequirements>os.win</platformRequirements>
	</test>
	<test>
		<testCaseName>Rebuild_Same_JDK_Reproducibility_Test_Mac</testCaseName>
		<command>unset SPEC;\
		ls -l $(TEST_ROOT)$(D)system$(D)reproducibleCompare$(D);\
		$(TEST_ROOT)$(D)system$(D)reproducibleCompare$(D)macos_repro_build_compare.sh $(SBOM_FILE) $(JDK_FILE) $(REPORTDIR); \
	$(TEST_STATUS)
		</command>
		<levels>
			<level>special</level>
		</levels>
		<groups>
			<group>system</group>
		</groups>
		<vendors>
			<vendor>eclipse</vendor>
		</vendors>
		<versions>
			<version>21+</version>
		</versions>
		<platformRequirements>os.osx</platformRequirements>
	</test>
</playlist>
